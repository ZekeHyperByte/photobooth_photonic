# ============================================================================
# Photonic Backend Environment Configuration Example
# ============================================================================
# Copy this file to .env and update values for your environment
#
# QUICK START:
# 1. Copy this file: cp .env.example .env
# 2. Update the values below
# 3. Run: pnpm db:migrate
# 4. Start: pnpm dev
# ============================================================================

# ============================================================================
# Server Configuration
# ============================================================================
NODE_ENV=development          # 'development' or 'production'
PORT=4000                     # Backend API port
DATABASE_PATH=./data/photobooth.db

# ============================================================================
# Development Mode
# ============================================================================
# DEV_MODE=true enables mock payments, auto-approves transactions
# Set to false for production with real payments
DEV_MODE=true

# ============================================================================
# Payment Provider Configuration
# ============================================================================
# Options: 'mock', 'midtrans', 'xendit', 'stripe'
# Use 'mock' for testing without real payment gateway
PAYMENT_PROVIDER=mock

# ---------------------------------------------------------------------------
# Midtrans Configuration (only needed if PAYMENT_PROVIDER=midtrans)
# ---------------------------------------------------------------------------
# Get keys from: https://dashboard.midtrans.com/settings/access_keys
# Sandbox keys start with "SB-Mid-", production keys start with "Mid-"
MIDTRANS_SERVER_KEY=          # Example: SB-Mid-server-xxxxxxxxxxxxxxxx
MIDTRANS_CLIENT_KEY=          # Example: SB-Mid-client-xxxxxxxxxxxxxxxx
MIDTRANS_ENVIRONMENT=sandbox  # 'sandbox' for testing, 'production' for live

# ============================================================================
# Camera Configuration
# ============================================================================

# Camera Provider (choose one):
# - 'edsdk'     : Canon DSLR via EDSDK (Windows only, recommended for production)
# - 'webcam'    : Use browser/system webcam
# - 'mock'      : Simulated camera for testing without hardware
CAMERA_PROVIDER=edsdk

# Legacy options (deprecated, use CAMERA_PROVIDER instead):
# MOCK_CAMERA=false           # DEPRECATED: Use CAMERA_PROVIDER=mock
# USE_WEBCAM=false            # DEPRECATED: Use CAMERA_PROVIDER=webcam

# EDSDK Library Path (Windows only, optional)
# Only set this if EDSDK.dll is not in the default location
# EDSDK_LIB_PATH=C:\Program Files\Canon\EDSDK\EDSDK.dll

# Capture Settings
CAPTURE_TIMEOUT_MS=30000      # Max time to wait for photo capture (30 seconds)
CAPTURE_QUEUE_MODE=reject     # 'reject' or 'queue' when camera is busy

# Live View Settings
LIVEVIEW_FPS=24               # Target frames per second for preview
LIVEVIEW_TRANSPORT=http       # 'http' or 'ipc' for preview stream

# Mock Camera Failure Simulation (only for CAMERA_PROVIDER=mock)
# MOCK_FAILURE_MODE=none      # Options: none, disconnect, timeout, card_full, flaky, no_af

# ============================================================================
# WhatsApp Delivery Configuration
# ============================================================================
# Optional - for sending photos via WhatsApp
WHATSAPP_PROVIDER=fonnte      # 'fonnte' or 'wablas'
WHATSAPP_API_KEY=             # Get from https://fonnte.com or https://wablas.com

# ============================================================================
# Print Service Configuration
# ============================================================================
ENABLE_PRINTING=true          # Enable/disable printing feature

# ============================================================================
# Admin Dashboard Configuration
# ============================================================================
ADMIN_PIN=1234                # PIN code for admin access (change in production!)
ADMIN_PORT=4001               # Port for admin web interface

# ============================================================================
# File Storage Paths
# ============================================================================
# Optional: Override default paths for file storage
# TEMP_PHOTO_PATH=./data/photos
# PROCESSED_PATH=./data/processed
# TEMPLATES_PATH=./data/templates
# THUMBNAILS_PATH=./data/thumbnails

# ============================================================================
# Analytics & Sync Configuration
# ============================================================================
# Optional - for syncing data to central analytics dashboard
ENABLE_ANALYTICS=false        # Enable/disable analytics sync
BOOTH_ID=booth-001            # Unique identifier for this booth
CENTRAL_SERVER_URL=           # URL to analytics server (e.g., https://analytics.example.com)
CENTRAL_SERVER_API_KEY=       # API key for analytics authentication
SYNC_INTERVAL_MS=3600000      # Sync interval in milliseconds (1 hour = 3600000)

# ============================================================================
# Production Checklist
# ============================================================================
# Before deploying to production, verify:
#
# [ ] Set NODE_ENV=production
# [ ] Set DEV_MODE=false (enables real payments)
# [ ] Set PAYMENT_PROVIDER to 'midtrans' (not 'mock')
# [ ] Configure real Midtrans credentials
# [ ] Set CAMERA_PROVIDER=edsdk (not 'mock')
# [ ] Verify Canon camera is connected and working
# [ ] Set strong ADMIN_PIN (not '1234')
# [ ] Configure WhatsApp API key (if using WhatsApp delivery)
# [ ] Test full payment flow with real transaction
# [ ] Verify printer is installed and working
# [ ] Set up firewall rules for ports 4000, 4001
# [ ] Configure automated backups
# [ ] Test system self-test: POST /api/admin/self-test
#
# ============================================================================
